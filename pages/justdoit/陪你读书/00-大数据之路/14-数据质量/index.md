# 数据质量

- 数据质量是数据分析结论有效性和准确性的基础与前提。

## 数据质量保障原则

- 完整性：评估数据的记录和信息是否完整，是否存在缺失的情况。一般指的是记录的缺失以及字段值的缺失。
- 准确性：评估数据中记录的信息与数据是否准确，是否存在异常或者错误的信息。
- 一致性：保证数据在传输过程中保持一致，如用户ID的类型以及长度不能变化。
- 及时性：保障数据的及时产出。

## 数据质量方法概述

### 消费场景知晓

- 在海量数据场景下，数据研发工程师也难以确认哪些数据是重要的，是否需要对所有数据进行保障？这种问题可以通过数据资产定级的策略解决，通过资产定级，让各方人员知晓数据的消费场景。
- 数据资产等级定义，指的是将数据划分等级：
  - 毁灭性质：数据一旦出错，会导致重大资产损失，公共危机
  - 全局性质：数据直接或间接用于企业业务与效果评估，运维
  - 局部性质：数据直接或间接用于内部一般数据产品或者运营，出现问题会影响相关业务线
  - 一般性质：用于日常数据分析，出现问题影响较小
  - 未知性质：不能明确说出数据的应用场景，标注为未知
- 数据资产等级标注需要依赖元数据以及血缘分析等技术进行落地。

### 数据加工过程卡点校验

- 在线系统卡点校验：在在线业务系统的数据产生过程中进行卡点校验。既要保障数据的准确性，也要保障和离线数据的一致性。准确性以数据监控为主，一致性保障需要工具与人员双管齐下，既要工具自动捕捉到每次业务的变化，开发人员在意识上也要主动进行业务变更通知。
- 离线系统卡点校验：数据从在线业务系统到数据仓库再到需要产品这一条链路上，数据需要先在数据仓库进行清洗加工，需要确保数据加工的质量
  - 代码提交时卡点校验：通过SQLSCAN扫描工具检测SQL中的风险点。
  - 任务发布上线时的卡点校验：代码需要经过`CodeReview`以及回归测试。**Dry Run测试不运行代码，只运行执行计划，避免线上线下环境不一致导致语法错误**。
  - 节点变更或者数据重刷前使用通知中心将变更原因等信息通过发布订阅模型自动通知下游。

### 风险点监控

- 在线数据风险点监控：主要根据业务规则对数据进行监控，如采用实时业务检测平台BCP，在数据落库时，将数据送入系统进行逻辑校验，如果校验不通过则进行报警处理。
- 离线数据风险点监控：监控准确性以及及时性
  - 准确性：离线开发人员进行规则的配置，利用DQC检查运行的SQL任务。
  - 及时性：一般任务都是在从零点开始在夜间运行，需要进行优先级配置以及报警配置，确保高优的任务及时地正确产出。报警配置有预警判断，通过任务平均产出时间推算当天产出时间；出错预警，任务运行出错时进行报警。

### 质量衡量

- 数据质量起夜率：开发人员的夜间起夜运维次数
- 数据质量事件：对数据质量问题进行记录，用于跟进问题的处理进度，分析原因以及复盘
- 数据质量故障体系
  - 故障定义：将重要的业务数据注册到系统中，当出现问题时自动生成故障单，形成故障
  - 故障等级：根据故障时长、影响范围、损失进行定级
  - 故障处理：故障发生后快速归因，定位并解决
  - 故障复盘：对故障进行复盘，对系统进行查漏补缺