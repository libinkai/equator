> 动态规划，Dynamic Programming（力扣机翻“动态编程”），Programming即推导的意思，DP即分治+最优子结构（动态递推）

# 思维与定义

## 结论

- 动态规划和递归、分治没有本质上的区别，它们的共同之处是寻找问题的重复子问题，不同的是DP具有最优子结构，中途可以淘汰次优解
- 与分治算法不同的是，有些问题分治之后子问题是不独立的，递归求解的过程中需要反复用到之前计算过的子问题，这就需要动态规划
- 最优子结构的意思是局部最优解能决定全域最佳解
- 通常许多子问题非常相似，为此动态规划法试图仅仅解决每个子问题一次，从而减少计算量：一旦某个给定子问题的解已经算出，则将其记忆化存储，以便下次需要同一个子问题解之时直接查表。这种做法在重复子问题的数目关于输入的规模呈指数增长时特别有用
- DP为什么比暴力法快：无论是DP还是暴力，我们的算法都是在**可能解空间**内，寻找**最优解**。DP是枚举**有希望成为答案的解**。这个空间比暴力的小得多
- 很多问题其实都具有最优⼦结构，只是其中⼤部分不具有重叠⼦问题，所以我们不把它们归为动态规划系列问题⽽已
- 递归自底向上，记忆化搜索自顶向下，记忆化搜索无法使用滚动数组

## 性质

1. 无后效性，未来与过去无关
2. 最优子结构，大问题的最优解可以由小问题的最优解推出（子问题之间必须相互独立）

## 动态规划的思路

1. 描述最优解
2. 递归定义最优解
3. **自底向上**计算最优解
4. 编程计算

## 动态规划组成部分

> 九章算法

### 1.确定状态

> 类似于解数学题中定义X，Y等变量，一般使用数组

- 两个意识：最后一步，子问题

### 2.转移方程

### 3.初始条件与边界情况

- 初始条件是转移方程算不出来的

### 4.计算顺序

# 题眼

- 在整个数组或在固定大小的滑动窗口中找到总和或最大值或最小值的问题可以通过动态规划（DP）在线性时间内解决
- 计数 ++
  - 有多少种方式走到地图的另一个角落
  - 有多少种方法选出k个数字使得他们的和是sum

- 求最值 min、max
  - 从左上角走到右下角路径的最大数字之和
  - 最长上升子序列长度
- 求存在性 or、and
  - 取石子游戏，先手是否必胜
  - 能不能选出k个数字使得他们的和是sum

# DP技巧

## opt数组大小

- 如果题目使用到n，则opt[n+1]，否则opt[n]

## 空间优化

> 滚动数组、滚动变量

- 如果数组列远多于行，可以逐列计算

## 打印决策路径

- `pi[row][col]数组，pi[i][j]=0来自上方，pi[i][j]=1来自下方`
- 由pi最右下角节点逆序遍历
- 使用滚动数组，其实也可以打印，使用二分的方式分别处理
- 如果需要打印所有满足条件的决策路径，需要使用搜索不能使用DP

# 动态规划类型

## 坐标型

- 一维序列  `opt[i]即以ai结尾的子序列性质`

- 二维网格  `opt[i][j]即坐标(i,j)的状态`

### 题目类型

- 找到序列中某个/某些子序列或者网格中的路径
  - 最值
  - 计数
  - 存在性

### 题目举例

1. 不同路径

## 序列型

> ⼦串⼀定是连续的，⽽⼦序列不⼀定是连续的

- `前i个...最小/方式数/可行性，空间需要是n+1`
- `f[0]`是空序列的性质
- `f[i]`是表示以`ai`结尾的序列的某种性质（前i个元素）
- 如果序列成圈，而且头部与尾部相互制约，需要破圈，转化为无圈序列问题（加法原理）

### 题目举例

1. 粉刷房子
2. 打家劫舍

# 双序列型

- 有两个序列或者字符串，需要进行一些操作
- 每个序列本身是一维的，可以转化为二维DP
- `opt[i][j]表示A前i个字符A[0...i-1]、B前i个字符B[0...j-1]具有某些性质`
- 时间复杂度一般`O(MN)`，空间复杂度一般`O(MN)`

## 最长序列型

> 其实是坐标型

- 记录以每个元素i结尾的最长子序列的长度
- 计算时，在i之前枚举子序列的上一个元素是哪个

### 题目举例

1. LIS

## 划分型

- 给定长度为N的序列或者字符串，要求划分成若干段
  - 段数不限或者指定k段
  - 每一段满足一定的性质
- 类似于序列型动态规划，但是通常需要加上段数信息
- 一般使用`opt[i][j]`表示前i个元素分成j段的性质，如最小代价
- 题眼：**分成**

## 区间型

- 给定一个序列，进行一些操作
- 状态自然定义为`opt[i][j]`，表示面对子序列`[i...j]`时的最优解
- 计算顺序必须按照长度从小到大的顺序去算
- 可以尝试记忆化搜索

## 背包型

> 背包型题目一般是隐藏型的，不直接说明是背包问题

- **背包问题中，数组大小和总承重有关**
- 背包问题中，可以从旧值推出新值，压缩数组

### 题目举例

- 01背包
  - 前i个物品能拼出哪些重量
    - 前i-1个物品能拼出的重量
    - 前i-1个物品能拼出的重量+第i个物品重量
- 求拼出某重量的方式数

## 博弈型

> **通常从第一步开始分析而不是最后一步，唯一从第一步开始分析的DP类型**，因为局面一般越来越简单（可行解区域不断减少）

- 先手：先出招的一方
- 出招后，先手换人，新的先手面对一个新的局面
- 必胜态VS必败态

### 题目举例

- 取石子

## 位操作型

> 位操作DP一般用值做状态

## 综合型