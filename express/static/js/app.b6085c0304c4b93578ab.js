webpackJsonp([1],{HNp8:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},r,!1,function(t){n("HNp8")},null,null).exports,o=n("/ocq"),s=n("ifoU"),c=n.n(s),l={name:"Index",data:function(){return{schoolId:void 0,schoolOptions:void 0,targetId:void 0,targetOptions:void 0,weight:void 0,expressPriceMap:void 0,targetPriceList:void 0,calculateResultList:void 0,perfectResult:void 0,displayBoard:!1}},mounted:function(){this.initOptions()},methods:{obj2Map:function(t){var e=new c.a;for(var n in t)e.set(n,t[n]);return e},map2Options:function(t){var e=[];return t.forEach(function(t,n){e.push({label:n,value:t})}),e},initOptions:function(){var t=this;this.$httpUtil.get("../../static/meta.json").then(function(e){var n=t.obj2Map(e.school_id_map),i=t.obj2Map(e.target_id_map);t.schoolOptions=t.map2Options(n),t.targetOptions=t.map2Options(i)})},pickSchool:function(t){var e=this;console.log("选择了学校"+t),this.$httpUtil.get("../../static/"+t+".json").then(function(t){e.expressPriceMap=e.obj2Map(t),void 0!==e.targetId&&(console.log("重新调用pickTarget"),e.pickTarget(e.targetId))})},pickTarget:function(t){console.log("选择了目的地"+t);var e=[];this.expressPriceMap.forEach(function(n,i){e.push({express:i,price:n[t]})}),this.targetPriceList=e},calculate:function(){this.displayBoard=!1;for(var t=[],e="",n=1e4,i=0;i<this.targetPriceList.length;i++){var r=0,a=this.weight,o=this.targetPriceList[i].price.step_price;o.sort(function(t,e){return t.ceiling-e.ceiling});for(var s=0;s<o.length;s++){var c=o[s];if(1===c.price_type){if(a<=c.ceiling){r=c.price;break}r+=c.price}else if(2===c.price_type){if(a<=c.ceiling){r+=(a-o[s-1].ceiling)*c.price;break}r+=(c.ceiling-o[s-1].ceiling)*c.price}console.log(i,s,r)}t.push({expressCost:r.toFixed(2),express:this.targetPriceList[i].express}),r<n&&(n=r.toFixed(2),e=this.targetPriceList[i].express)}console.log(t),this.calculateResultList=t,this.perfectResult={perfectExpress:e,perfectExpressCost:n},this.displayBoard=!0}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[t._m(0),t._v(" "),n("div",{attrs:{id:"parameter-setting"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择学校"},on:{change:t.pickSchool},model:{value:t.schoolId,callback:function(e){t.schoolId=e},expression:"schoolId"}},t._l(t.schoolOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),n("el-select",{attrs:{filterable:"",placeholder:"请选择快递目的地"},on:{change:t.pickTarget},model:{value:t.targetId,callback:function(e){t.targetId=e},expression:"targetId"}},t._l(t.targetOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),n("el-input",{attrs:{placeholder:"请输入快递重量（斤）",clearable:""},model:{value:t.weight,callback:function(e){t.weight=e},expression:"weight"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.calculate}},[t._v("计算")])],1),t._v(" "),t.displayBoard?n("div",{attrs:{id:"display-board"}},[n("h5",[t._v("\n      yyds，"+t._s(t.perfectResult.perfectExpress)+"：总共费用约"+t._s(t.perfectResult.perfectExpressCost)+"元\n    ")]),t._v(" "),t._l(t.calculateResultList,function(e){return n("div",[n("span",[t._v(t._s(e.express))]),t._v("："),n("span",[t._v(t._s(e.expressCost))])])})],2):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"page-title"}},[e("div",[e("h2",[this._v("毕业季快递价格对比")])])])}]};var u=n("VU/8")(l,p,!1,function(t){n("eUKQ")},"data-v-6bfa5680",null).exports;i.default.use(o.a);var f=new o.a({routes:[{path:"/",name:"Index",component:u}]}),d=n("zL8q"),h=n.n(d),v=(n("tvR6"),n("Dd8w")),g=n.n(v),_=n("//Fk"),m=n.n(_),x=n("mtWM"),b=n.n(x),w=n("mw3O"),y=n.n(w),k=b.a.create({timeout:6e4});k.interceptors.request.use(function(t){return t.headers.token=localStorage.token,t});var P="https://www.equator8848.xyz/express/";function O(t,e){return new m.a(function(n,i){k.post(t,e,{headers:{"Content-Type":"application/json"}}).then(function(t){n(t.data)}).catch(function(t){alert("异常："+t)})})}var I={get:function(t,e){return function(t,e){return new m.a(function(n,i){k.get(t,{params:g()({},e)}).then(function(t){n(t.data)}).catch(function(t){alert("异常："+t)})})}(P+t,e)},urlEncoderPost:function(t,e){return function(t,e){return new m.a(function(n,i){k.post(t,y.a.stringify(e)).then(function(t){n(t.data)}).catch(function(t){alert("异常："+t)})})}(P+t,e)},urlEncoderPut:function(t,e){return function(t,e){return new m.a(function(n,i){k.put(t,y.a.stringify(e)).then(function(t){n(t.data)}).catch(function(t){alert("异常："+t)})})}(P+t,e)},jsonPost:function(t,e){return O(P+t,e)},formDataPost:function(t,e){return O(P+t,e)}};i.default.use(h.a),i.default.prototype.$httpUtil=I,i.default.config.productionTip=!1,i.default.config.productionTip=!1,new i.default({el:"#app",router:f,components:{App:a},template:"<App/>"})},eUKQ:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b6085c0304c4b93578ab.js.map